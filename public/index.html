<!DOCTYPE html>
<html>
<head>
  <title>A/B Testing Interface</title>
  <style>
    /* Add necessary styles */
  </style>
</head>
<body>
  <h1>A/B Testing Interface</h1>
  <form id="urlForm">
    <label for="urlInput">Enter URL:</label>
    <input type="text" id="urlInput" required>
    <button type="submit">Load Screenshot</button>
  </form>
  <div id="screenshotContainer">
    <iframe id="screenshotFrame"></iframe>
  </div>
  <div id="stylingForm">
    <h2>Styling Options</h2>
    <label for="elementSelect">Select Element:</label>
    <select id="elementSelect">
      <!-- Populate options dynamically based on elements in the screenshot -->
    </select>
    <label for="backgroundColorInput">Background Color:</label>
    <input type="color" id="backgroundColorInput">
    <button id="applyStylingBtn">Apply Styling</button>
  </div>

  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script>
    // Capture the screenshot and load it into the iframe
    function captureScreenshot() {
      const url = document.getElementById('urlInput').value;
      const screenshotFrame = document.getElementById('screenshotFrame');

      screenshotFrame.src = url;
    }

    // Handle element selection and apply styling changes
    function handleElementSelection(event) {
      const selectedElementId = event.target.value;
      // Perform styling changes on the selected element
      // Replace this with your own logic to apply styling changes

      // Placeholder log message
      console.log(`Selected element ID: ${selectedElementId}`);
    }

    // Add an event listener to the form submission
    document.getElementById('urlForm').addEventListener('submit', function (event) {
      event.preventDefault();
      captureScreenshot();
    });

    // Add an event listener to the Apply Styling button
    document.getElementById('applyStylingBtn').addEventListener('click', function () {
      const elementSelect = document.getElementById('elementSelect');
      const selectedElementId = elementSelect.value;
      const backgroundColorInput = document.getElementById('backgroundColorInput');
      const backgroundColor = backgroundColorInput.value;

      // Make an HTTP request to your backend API to apply styling changes
      // Replace the URL with your backend API endpoint
      fetch('/update-styling', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          elementId: selectedElementId,
          backgroundColor: backgroundColor,
        }),
      })
        .then((response) => response.json())
        .then((data) => {
          console.log('Styling changes applied successfully');
        })
        .catch((error) => {
          console.error('Failed to apply styling changes:', error);
        });
    });
  </script>
</body>
</html>
