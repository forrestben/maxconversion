<!DOCTYPE html>
<html>
<head>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js">
  <title>A/B Testing Interface</title>
  <style>
    /* Add necessary styles */
  </style>
</head>
<body>
  <h1>A/B Testing Interface</h1>
  <form id="urlForm">
    <label for="urlInput">Enter URL:</label>
    <input type="text" id="urlInput" required>
    <button type="submit">Load Screenshot</button>
  </form>
  <div id="screenshotContainer"></div>
  <div id="stylingForm">
    <h2>Styling Options</h2>
    <label for="styleSelect">Select Style:</label>
    <select id="styleSelect">
      <option value="backgroundColor">Background Color</option>
      <option value="color">Color</option>
      <option value="borderRadius">Border Radius</option>
    </select>
    <label for="hexInput">Enter Hex Code:</label>
    <input type="text" id="hexInput">
    <button id="applyStylingBtn">Apply Styling</button>
  </div>
  <div id="successMessage" style="display: none;">Styling changes applied successfully!</div>

  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script>
    // Capture the screenshot and render the webpage content
    async function captureScreenshot() {
      const url = document.getElementById('urlInput').value;
      const screenshotContainer = document.getElementById('screenshotContainer');
      
      const canvas = await html2canvas(document.body);
      screenshotContainer.innerHTML = '';
      screenshotContainer.appendChild(canvas);
      
      // Enable element selection on the rendered webpage content
      const elements = screenshotContainer.getElementsByTagName('*');
      for (let i = 0; i < elements.length; i++) {
        elements[i].addEventListener('click', handleElementSelection);
      }
    }

    // Handle element selection and apply styling changes
    function handleElementSelection(event) {
      const selectedElement = event.target;

      // Apply styling changes based on selected option and hex code
      const styleSelect = document.getElementById('styleSelect');
      const selectedStyle = styleSelect.value;
      const hexInput = document.getElementById('hexInput');
      const hexCode = hexInput.value;

      selectedElement.style[selectedStyle] = hexCode;

      // Send a message to the backend server to apply the styling changes on the live site
      // You need to implement the logic to send a request to the backend server here

      // Optional: Display a success message
      const successMessage = document.getElementById('successMessage');
      successMessage.style.display = 'block';
      setTimeout(() => {
        successMessage.style.display = 'none';
      }, 3000);
    }

    // Add an event listener to the form submission
    document.getElementById('urlForm').addEventListener('submit', function (event) {
      event.preventDefault();
      captureScreenshot();
    });

    // Add an event listener to the Apply Styling button
    document.getElementById('applyStylingBtn').addEventListener('click', function () {
      const screenshotContainer = document.getElementById('screenshotContainer');
      const selectedElement = screenshotContainer.querySelector(':hover');
      if (selectedElement) {
        handleElementSelection({ target: selectedElement });
      }
    });
  </script>
</body>
</html>
